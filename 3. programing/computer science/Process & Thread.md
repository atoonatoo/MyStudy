---
title: Process & Thread
type: computer science
director: programing
date: 2025-10-14
tags:
  - programing
  - cs
  - cs_operation_system
---
# 1. 프로세스와 스레드 개념

- **프로세스 (Process)** : 운영체제로부터 자원을 할당받은 `작업의 단위`

- **스레드 (Thread)** : 프로세스가 할당받은 자원을 이용하는 `실행 흐름의 단위`

---

## 1.1 프로그램(Program)과 프로세스(Process)

### 1.1.1 정적 프로그램(Static Program)

![](https://velog.velcdn.com/images/atoonatoo/post/d4e600f8-d792-455e-87a3-540f8533783a/image.png)

프로세스를 이해하기 앞서 우리가 친숙히 알고 있는 프로그램의 의미를 이해한다면 좀 더 쉽게 와닿을 수 있을 것이다.

프로그램은 윈도우의 `*.exe`파일이나 Mac의 `*.dmg` 파일과 같은 `컴퓨터에서 실행 할 수 있는 파일`을 통칭한다. 단, 아직 `파일을 실행하지 않은 상태`이기 때문에 정적 프로그램(Static Program) 줄여서 프로그램(Program)이라고 부르는 것이다.

어떠한 프로그램을 개발하기 위햐선 자바나 C언어와 같은 언어를 이용해 코드를 작성하여 완성된다. 즉, 프로그램은 쉽게 말해서 `코드 덩어리`라고 생각하면 된다.


### 1.1.2 프로세스(Process)

프로그램이 그냥 코드 덩어리이면, 프로세스는 프로그램을 실행 시켜 정적인 프로그램이 동적으로 변하여 `프로그램이 돌아가고 있는 상태`를 말한다. 즉, 컴퓨터에서 작업 중인 프로그램을 의미하는 것이다.

![](https://velog.velcdn.com/images/atoonatoo/post/e2968af3-b50d-4eea-9ed1-fa63e1d95993/image.png)

우리가 자주 사용하는 `작업 관리자`를 열어보자 그 동안 눈여겨 보지 않았을 뿐, `실행중인 프로그램`들을 나열하여 보여주고 있다. 이것이 바로 그 프로세스이다.

모든 프로그램은 운영체제가 실행되기 위한 메모리 공간을 할당해 줘야 실행될 수 있다. 
그래서 프로그램을 실행하는 순간 파일은 컴퓨터 메모리에 올라가게 되고, 운영체제로부터 시스템 자원(CPU)를 할당받아 프로그램 코드를 실행시켜 우리가 서비스를 이용할 수 있게 되는 것이다.

---
## 1.2 스레드(Thread)

### 1.2.1 프로세스의 한계

과거에는 프로그램을 실행할 때 프로스세 하나만을 사용해서 이용했다고 한다. 하지만 급속도로 기술의 발전됨에 따라 프로그램이 복잡해지고 다채로워짐으로써 프로세스 작업 하나만을 사용해서 프로그램을 실행하기에는 한계가 있었다.

오늘날 컴퓨터는 파일을 다운 받으며 다른 일을 하는 `멀티 작업`이 너무 당연한 기능이라고 생각할지 모르겠지만, 과거에는 파일을 다운받으면 실행 시작부터 실행 끝까지 프로세스 하나만을 사용하기 때문에 다운이 완료될때까지 하루종일 기다려야 했다고 한다. 그렇다고 동일한 프로그램을 여러 개의 프로세스로 만들게 되면, 그 만큼 메모리를 차지하고 CPU에서 할당받는 자원이 중복되게 될 것이다. 스레드(Thread)는 이러한 프로세스 특성의 한계를 해결하기 위해 탄생 하였다.

### 1.2.2 스레드의 개념

스레드란, 하나의`프로세스 내에서 동시에 진행되는 작업 갈래, 흐름의 단위`를 의미한다.

이해를 돕기 위한 비유로, 크롬 브라우저가 실행되면 프로세스 하나가 생성될 것이다. 
여기서 우리는 브라우저를 이용한다면 `브라우저에서 파일 다운`, `동영상 시청`, `게임 이용`, `쇼핑`, `웹서핑` 등 최소 2개 이상의 작업을 당연하듯이 동시에 이용한다.

즉, 하나의 프로세스 안에서 여러가지 작업들 흐름이 동시에 진행되가 때문에 가능한 것이다.
이러한 일련의 작업 흐름들을 스레드라고 하며 여러개가 있다면 이를 멀티(다중) 스레드 라고 부른다.

일반적으로 하나의 프로그램은 하나 이상의 프로세스를 가지고 있고, 하나의 프로세스는 반드시 하나 이상의 스레드를 갖는다. 즉, 프로세스를 생성하면 기본적으로 하나의 main 스레드가 생성되게 된다. 스레드 2개, 3개..는 프로그램을 개발한 개발자가 직접 프로그래밍하여 위치 시켜주어야 한다. 그래서 별도로 스레드 프로그래밍 과목이 있다고 한다.

# 2. 프로세스 & 스레드의 메모리

## 2.1 프로세스의 자원 구조

프로그램이 실행되어 프로세스가 만들어지면 다음 4가지의 [[메모리 구조(memory structure)]]로 구성되어 할당 받게 된다.

![](https://velog.velcdn.com/images/atoonatoo/post/1bc7b4f1-8396-45c1-b466-cc9f4f086469/image.png)

- **코드 영역(Code / Text)**
    `프로그래머가 작성한 프로그램 함수들의 코드`를 CPU가 해석 가능한 `기계어 형태로 저장`되어 있다.

- **데이터 영역(Data)**
    코드가 실행되면서 사용하는 `전역 변수`나 각종 데이터들이 모여있다. 데이터 영역은 `.data`, `.rodata`, `.bss` 영역으로 세분화 된다.
  - .data : 전역 변수 또는 static 변수 등 프로그램이 사용하는 데이터를 저장
  - .BSS : 초기값 없는 전역 변수, static 변수가 저장
  - .rodata : const같은 상수 키워드 선언 된 변수나 문자열 상수가 저장

- **스택 영역(Stack)**
    `지역 변수와 같은 호출한 함수가 종료되면 되돌아올 임시적인 자료를 저장`하는 독립적인 공간이다.
    Stack은 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸한다. 만일 stack 영역을 초과하면 `stack overflow` 에러가 발생한다.

- **힙 영역(Heap)**
    `생성자, 인스턴스와 같은 동적으로 할당되는 데이터들을 위해 존재하는 공간`이다. 사용자에 의해 메모리 공간이 동적으로 할당되고 해제된다.

    위 그림을 보면 Stack과 Heap 영역이 위아래로 화살표가 쳐 있는 것을 볼 수 있다.
    이는 Code 영역과 Data 영역은 선언할 때 그 크기가 결정되는 정적 영역이지만, Stack 영역과 Heap 영역은 프로세스가 실행되는 동안 `크기가 늘어났다 줄어들기도 하는 동적 영역`이기 때문에 표현한 것이다.

간략하게 정리하자면, 프로그램이 여러개 실행된다면 메모리에 프로세스들이 담길 주소 공간이 생성되게 되고 그 안에 Code, Data, Stack, Heap 공간이 만들어지게 된다.

## 2.2 스레드의 자원 공유

스레드는 프로세스가 할당 받은 자원을 이용하는 실행의 단위로서, 스레드가 여러개 있으면 우리는 웹서핑과 동시에 파일을 다운로드도 받을 수 있도록 해준다. 스레드끼리 `프로세스의 자원을 공유`하면서 프로세스 실행 흐름의 일부가 되기 때문에 동시 작업이 가능한 것이다.

이때 프로세스의 4가지 메모리 영역(Code, Data, Stack, Heap) 중 스레드는 Stack만 할당받아 복사하고, Code, Data, Heap은 프로세스 내의 다른 스레드들과 공유된다. 따라서 각각의 스레드는 별도의 Stack을 가지고 있지만, Heap 메모리는 고유하기 때문에 서로 다른 스레드에서 가져와 읽고 쓸 수 있게 된다.

- stack은 함수 호출 시 전달되는 인자, 되돌아갈 주소값, 함수 내에서 선언하는 변수 등을 저장하는 메모리 공간이기 때문에, 독릭접인 스택을 가졌다는 것은 독립적인 함수 호출이 가능하다는 의미이다. 그리고 독립적인 함수 호출이 가능하다는 것은 독립적인 실행 흐름이 추가된다는 말이다. 즉, stack을 가짐으로써 스레드는 독립적인 실행 흐름을 가질 수 있게 되는 것이다.

- 반면 프로세스는 기본적으로 프로세스 끼리 다른 프로세스의 메모리에 직접 접근할 수 없다.

이렇게 구성한 이유는 하나의 프로세스를 다수의 실행 단위인 스레드로 구분하여 자원을 공유하고, 자원의 생성과 관리의 중복성을 최소화하여 수행 능력을 올리기 위해서이다.

## 2.3 프로세스의 자원 공유

기본적으로 각 프로세스는 메모리에 별도의 주소 공간에서 실행되기 때문에, 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근할 수는 없다. 

현재 우리가 사용하는 대부분의 컴퓨터 프로그램을 보면 다른 프로그램에 있는 정보를 가져오는 경우는 심심치 않게 볼 수 있다. 이처럼 특별한 방법을 통해 프로세스가 다른 프로세스의 정보에 접근하는 것이 가능하다. 프로세스 간 정보를 공유하는 방법에는 다음과 같은 방법들이 있다.

- [[IPC(Inter-Process Communication)]]사용
- [[LPC(Local inter-Process Communication)]] 사용
- 별도로 공유 메모리를 만들어서 정보를 주고 받도록 설정

그러나 프로세스 자원 공유는 단순히 CPU 레지스터 교체뿐만이 아니라 RAM과 CPU 사이의 캐시 메모리까지 초기화되기 때문에 `자원 부담이 크다는 단점이 있다. 그래서 다중 작업이 필요한 경우 스레드를 이용하는 것이 훨씬 효율적`이라, 현대 컴퓨터의 운영체제에선 다중 프로세싱을 지원하고 있지만 다중 스레딩을 기본으로 하고 있다.

---
# 3. 프로세스 & 스레드의 동시 실행 원리

우리가 음악을 들으면서, 웹서핑을 하고, 메신저의 메시지를 확인할 수 있는 이유는 컴퓨터 내부적으로 프로세스와 스레드를 동시에 처리하는 [[multi tasking]] 기술 덕분이다. 하지만, 여기서 동시에 처리하는 것이 심플하게 CPU 프로세서가 프로그램들을 한꺼번에 동시에 돌리는 것으로 생각하겠지만, 내부적으로 복잡한 원리에 의해 처리가 된다. 그리고 이 원리가 운영체제 이론의 핵심 원리이기도 하다.

## 3.1  멀티 코어와 스레드

컴퓨터를 구매해본 경험이 있는 사람들이라면 본인이 구매할 컴퓨터의 사양은 반드시 체크해봤을 것이다. 여기서 익숙한 용어인 `4코어 8쓰레드 CPU`라는 단어를 접해봤을 것이다. 

여기서 코어는 CPU 코어 유닛으로, 명령어를 메모리에서 뽑아 해석하고 실행하는 반도체 유닛이 4개 있다는 의미이다. 코어는 물리적인 개수, 쓰레드는 논리적 코어 개수를 의미한다. 이 경우 코어 1개 당 2개의 쓰레드를 사용할 수 있다는 말이다. 즉, 운영체제가 8개의 작업을 동시에 처리할 수 있다는 뜻이다. 이를 [[하이퍼스레딩(Hyper-Threading)]]기술이라고 말한다.

- 햇갈리면 안되는 점은 여기서 말하는 CPU 쓰레드와 우리가 배운 프로세스의 쓰레드는 조금 다른 개념이다. CPU의 스레드는 하드웨어적인 스레드이고, 프로세스의 스레드는 소프트웨어적 스레드로 구분한다.

여기서 이해가 잘안되는 부분은 우리가 컴퓨터를 이용할 때 프로그램을 수십, 수백개를 켜 놓고 이용하는데, 그렇다면 그 수십에서 수백개가 되는 프로세스들을 고작 8개의 논리적인 스레드로 어떻게 처리가 되는 것일까?

이 원리를 알기 위해선 병렬성(Parallelism)과 동시성(Concurrency)이라는 개념을 이해해야 한다. 이 개념은 운영체제 프로세스와 스레드를 이해하는데 있어 가장 핵심적인 개념이다.

## 3.2 CPU의 작업 처리 방식

### 3.2.1 병렬성(Paralleism)

병렬성은 직관적으로 명령어를 메모리에서 뽑아 해석하고 실행하는 반도체 유닛인 여러개의 코어의 갯수에 맞춰 여러개의 프로세스, 스레드를 돌려 병렬로 작업들을 동시 수행하는 것을 의미한다.

듀얼 코어, 쿼드코어, 옥타코어 등등 이런 명칭이 붙는 멀티코어 프로세서가 달린 컴퓨터에서 할 수 있는 방식이다.

### 3.2.2 동시성 (Concurrency)

동시성은 둘 이상의 작업을 동시에 실행되는 것을 의미한다.

이 `동시`라는 의미에서 병렬성과 동시성의 한글 의미가 헷갈릴 수 있다. Parallelism가 물리적으로 정말로 동시에 실행하는 것이라고 하면, Concurrency는 `동시에 실행하는 것처럼 보이게 하는 것`으로 이해하면 된다.

![[Pasted image 20251014133237.png]]

즉, 1개의 코어가 있고 4개의 작업이 있다고 가정한다면, 프로세스들을 계속 번갈아가면서 조금씩 처리함으로써 마치 프로그램이 동시에 실행되는 것처럼 보이는 것이다. 이때 프로세스들을 번갈아가면서 매우 빠르게 처리하기 때문에 컴퓨터를 모르는 사람들이 보면 마치 동시에 돌아가는 것처럼 보이게 된다.

### 3.2.3 동시성이 필요한 이유
---
# 4. 프로세스 & 스레드의 생명 주기

## 4.1 프로세스 스케쥴링

## 4.2 프로세스 상태

### 4.2.1 프로세스 상태 전이

## 4.3 프로세스 컨텍스트 스위칭

### 4.3.1 PBC(Process Control Block)

### 4.3.2 Context Switching Overhead

## 4.4 스레드 스케쥴링

## 4.5 스레드 상태

## 4.5.1 스레드 상태 전이

## 4.6 스레드 컨텍스트 스위칭
### 4.6.1 TCB(Thread Control Block)
### 4.6.2 프로세스 컨텍스트 스위칭 vs 스레드 컨텍스트 스위칭
# 5. Multi Process와 Multi Thread

---
# 99. 참고 문헌

- [참고문헌](https://it-techtree.tistory.com/entry/difference-multiprocessor-multicore)
- [참고 문헌](https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4)
