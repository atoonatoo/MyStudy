생성일 | {{2024-00-00}}
작성자 | 김동욱


---

#### JPA

- JPA란?
	- 순수 JDBC - 등록
		- 복잡한 JDBC API와 SQL을 한땀한땀 작성해야하는 어려움이 있었다.
		  
	- JDBCTemplate, mybatis
		- SQL Mapper 등장으로 코드가 많이 줄어들었지만
		- SQL을 여전히 한땀한땀 작성해야한다.
		  
	- JPA
		- SQL조차 작성할 필요가 없어졌다.
		- 자바 컬렉션에 객체를 저장하고 조회하는 것처럼 단순하게 JPA를 이용한다.
	
- JPA가 실무에서 어려운 이유
	- 객체와 테이블을 올바르게 매핑하고 설계하는 방법을 모른다.
		- 실무에서는 객체와 테이블 못해도 최소 수십개 이상의 테이블이 복잡하게 돌아간다. 
		- JPA에서 제일 중요한 것은 객체와 테이블을 잘 설계하고 매핑을 정확하게 하는 것이다.
		- 이것을 이해하지 못하면 복잡한 실무 상황에서 잘못된 매핑을 하여 고생한다.
	
- JPA 목표
	- 객체와 테이블 설계 매핑
		- 객체와 테이블을 제대로 설계하고 매핑하는 방법
		- 기본 키와 외래 키 매핑
		- 1:N, N:1, 1:1, N:M 매핑
		- 실무 노하우 + 성능까지 고려
		- 어떠한 복잡한 시스템도 JPA로 설계 가능
		  
	- JPA 내부 동작 방식 이해
		- 실무에서 JPA가 어려운 2번째 이유
		- JPA의 내부 동작 방식을 이해하지 못하고 사용
		- JPA 내부 동작 방식을 그림과 코드로 자세히 설명
		- JPA가 어떤 SQL을 만들어 내는지 이해
		- JPA가 언제 SQL을 실행하는지 이해
	  
- JPA 기본편 학습 방법
	- JPA는 표준 스펙망 500페이지로 방대함
	- 혼자서 공부하기는 쉽지 않음
	- 강의는 이론 + 라이브 코딩
	- 6단계의 실전 예제
	- 강의를 메인으로 하고, 책은 참고서로 추천
	- 총 16시간: 하루 1시간 반, 2주 완성
	  
- JPA 적용 사례
	- 우아한형제들, 쿠팡, 카카오, 네이버 등등
	- 조 단위의 거래금액이 발생하는 다양한 서비스에서 사용, 검증
	- 최신 스프링 예제는 JPA 기본 적용
	- 자바 개발자에게 JPA는 기본 기술
	- 토비의 스프링 이일민님도 JPA는 기본 적용
	  
- JPA 김영한님의 실무 경험담
	- 실무에서 수많은 프로젝트를 JPA로 설계하고 개발
	- 김영한님도 처음에는 좌충우돌, 고생
	- 동료들이 다시는 과거로 돌아가고 싶어하지 않음
	- 단순한 SQL 작성으로 내 인생을 낭비하지 않음
	- 남는 시간에 더 많은 설계 고민, 테스트 코드 작성
	- 개발이 정말 즐거워 짐
	
- SQL 중심적인 개발의 문제점
	- 무한 반복, 지루한 코드
		- CRUD, INSERT INTO, UPDATE, SELECT... 자바 객체를 SQL로 SQL을 자바 객체로 바꾸는 번거로운 작업들을 하지만 SQL에 의존적인 개발을 피하기 어렵다.
		  
	- 객체 VS 관계형 데이터베이스
		- 객체 지향 프로그래밍은 추상화, 캡슐화, 정보은닉, 상속, 다형성 등 시스템의 복잡성을 제어할 수 있는 다양한 장치들을 제공한다.
		- 객체를 영구 보관하는 다양한 저장소가 존재하지만
			- RDB, NOSQL, File, OODB
			- 현실적인 대안은 릴레이셔널 데이터베이스 98% 사용하고
			- NOSQL은 특수한 상황에서만 사용한다.
	- 객체를 관계형 데이터베이스에 저장
		- 개발자 = SQL 매퍼
		  
	- 객체와 관계형 데이터베이스의 차이
		- 상속
			- 객체 상속 관계
			- Table 슈퍼타입 서브타입 관계
			- Album 저장
				- 객체 분해
				- INSERT INTO ITEM..
				- INSERT INTO ALBUM..
			- Album 조회
				- 각각의 테이블에 따른 조인 SQL 작성
				- 각각의 객체 생성
				- 상상만 해도 복잡
				- 더 이상의 설명은 생략한다.
				- 그래서 DB에 저장할 객체에는 상속 관계 안쓴다.
		- 연관관계
		- 데아터 타입
		- 데이터 식별 방법
		- 엔티티 신뢰 문제
		- 모든 객체를 미리 로딩할 수는 없다.
		  
	- 정리 : 객체와 DB의 매핑은 너무 번거롭고 복잡하며 시간을 낭비한다. 따라서 JPA가 얼마나 획기적이고 생산적인 기술인지 알 수 있도록 SQL의 문제점과 한계를 설명한다.
	
- JPA?
	- 자바 진영의 ORM 기술표준
		  
	- ORM?
		- 객체는 객체대로 설계, SQL은 SQL대로 설계하고 ORM 프레임워크가 중간에서 매핑하여 페러다임의 불일치를 해결해준다.
		- 대중적인 언어에는 대부분 ORM 기술이 존재
		
	- JPA는 애플리케이션과 JDBC 사이에서 동작
		
		  
	- JPA와 CRUD
		- 저장 jpa.persist(member)
		- 조회 Member member =  jpa.find(memberId)
		- 수정 member.setName("변경할 이름")
		- 삭제 jpa.remove(member)
		
	- JPA와 패러다임의 불일치 해결
		- JPA와 상속
		- JPA와 연관관계
		- JPA와 객체 그래프 탐색
		- JPA와 비교하기
	
- JPA 프로젝트 생성
	
- JPA 애플리케이션 개발
	


- JPA의 특징
	- 객체 - DB 매핑 (ORM)
	- DB 독립성
	- 영속성 관리
	- 쿼리 지원
	- 성능 최적화 기능
	- 트렌잭션 관리
	- 객체 그래프 탐색
	- 






---
